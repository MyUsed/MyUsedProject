<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="main">
   <!-- num 을 가져오는 sql -->
   <select id="num" resultClass="int" parameterClass="String">
      select num from memberlist where id = #sessionId#
   </select>
   <!-- name 을 가져오는 sql -->
   <select id="name" resultClass="String"  parameterClass="String">
      select name from memberlist where id = #sessionId#
   </select>
     <!-- boardlist 에서 가장 높은 num을 구하기 위해서  -->
   <select id="boardnum" resultClass="int">
   		select max(num) from boardlist 
   </select>
   	<!-- memberlist 에서 num을 받아 정보를 가져오는 sql -->
   <select id="userInfo" resultClass="member.MemberDTO" parameterClass="int">
   		select * from memberlist where num = #mem_num#
   </select>
   
   
   <!-- num 을 사용해서 개인 DB insert sql -->
   <insert id="addContent" parameterClass="java.util.Map">
      insert into board_$num$ values(board_$num$seq.NEXTVAL, #content#, #name# , default ,default, #num#, sysdate)
   </insert>
   <!-- num 을 사용해서 전체 DB insert sql -->
   <insert id="insertboardlist" parameterClass="java.util.Map">
      insert into boardlist values(boardlist_seq.NEXTVAL, #content#, #mem_pic# , #name# , default ,default,#num#,sysdate)
   </insert>
   <!-- board_num 에서 가장 높은 num을 구하기 위해서  -->
   <select id="board_num" resultClass="int"  parameterClass="int">
   		select max(num) from board_$num$ 
   </select>
   <!-- 개인사진 db에 저장하기 위해  -->
   <insert id="addPic" parameterClass="java.util.Map">
      insert into pic_$num$ values(#board_num#, #mem_pic#, #name# , sysdate)
   </insert>
    <!-- selct로 boardlist출력 -->
   <select id="boardView" resultClass="main.MainboardDTO" >
	select * from boardlist order by num desc                       
   </select>
   	<!-- 내용 검색 쿼리 -->
   <select id="tegSearch" resultClass="main.MainboardDTO" parameterClass="String">
   		select * from boardlist where content like '%'||#content#||'%' order by num desc
   </select>
   
   
   
   
 
 	

	<!-- num 을 사용해서 개인 pro DB insert sql -->
   <insert id="addProContent" parameterClass="java.util.Map">
      insert into proboard_$num$ values(proboard_$num$seq.NEXTVAL,  #content#, #categ#, #name# , default ,default,#num#,#price#, #sendpay# ,sysdate)
   </insert>
   <!-- 전체proboardlist에 insert sql  -->
   <insert id="insertproboardlist" parameterClass="java.util.Map">
      insert into proboardlist values(proboardlist_seq.NEXTVAL, #content#, #categ# , #name# , default , default, #price#, #sendpay#,#pro_pic#, #num#, sysdate)
   </insert>
    <!-- proboard_num 에서 가장 높은 num을 구하기 위해서  -->
   <select id="proboard_num" resultClass="int"  parameterClass="int">
   		select max(num) from proboard_$num$ 
   </select>
    <!-- 개인상품사진 db에 저장하기 위해  -->
   <insert id="addProPic" parameterClass="java.util.Map">
      insert into propic_$num$ values(#proboard_num#, #pro_pic#, #name# , sysdate)
   </insert>
     <!-- select로 boardlist출력 -->
   <select id="proboardView" resultClass="main.MainProboardDTO" >
	select * from proboardlist order by num desc                       
   </select>
   
    <!-- proboardlist 에서 가장 높은 num을 구하기 위해서  -->
   <select id="proboardMax" resultClass="int">
   	select max(num) from proboardlist 
   </select>
   
   <!-- 광고 업데이트 -->
   <select id="bannerSelect" resultClass="admin.BannerApplyDTO">
    select url,img from bannerlist where seq_num = (select max(seq_num)from bannerlist) 
   </select>
   
   <select id="AllNoticeSelect" resultClass="trade.noticeDTO" parameterClass="java.util.Map">
   	select * from notice_$mem_num$ where state = 1
   </select>
   
   
   
   

</sqlMap>